(function(){"use strict";var e={5781:function(e,n,t){var r=t(5130),o=(t(7642),t(8004),t(3853),t(5876),t(2475),t(5024),t(1698),t(6768)),l=t(4232),a=t(144),u=t(7694),i=t(4373);const c={id:"main"},s={id:"upload"},f={class:"ant-upload-drag-icon"},d={class:"button-container"},p=["innerHTML"],v=["innerHTML"],m={style:{display:"flex","justify-content":"space-between"}},y=["innerHTML"],h=["innerHTML"];var g={__name:"App",setup(e){const n=(0,a.KR)([]),t=(0,a.KR)([]),r=(0,a.KR)([]),g=(0,a.KR)([]),k=(0,a.KR)({}),b=(0,a.KR)([]),L=(0,a.KR)([]),E=()=>{t.value=[],r.value=[];const e=new FormData;Object.entries(localStorage).forEach((([n,t])=>{e.append(n,t)}));const n=Array.from(e.entries()).map((([e,n])=>({name:e,values:n})));i.A.post("api/analyze",n).then((e=>{u.Ay.success("请求成功！"),console.log("这里是数据",e.data);const{fileNameMap:n,differentLine:o,differentLine2:l,filenameMap2:a}=e.data;a.value=a;const i=o.map((e=>e.replace(/\r/g,"").trim())),c=Array.from(new Set(i.map((e=>e.split(":")[0].trim())))),s=i.map((e=>e.split(":")[1]?.trim()||"")),f=Object.keys(n),d=f[0],p=n[d];if(Array.isArray(l)){const e={};b.value={},L.value={};for(let n=0;n<l.length;n+=2){const t=l[n],r=l[n+1];void 0!==t&&void 0!==r&&(e[t]=r,b.value[t]=x(t,r),L.value[t]=C(r,t))}k.value=e}r.value=[{title:"",dataIndex:"key",key:"key"},{title:d,dataIndex:"value1",key:"value1"},{title:p,dataIndex:"value2",key:"value2"}];const v=c.map(((e,n)=>{const t={key:e,value1:s[2*n]||"",value2:s[2*n+1]||""},{result1:r,result2:o}=A(t.value1,t.value2);return t.value1=r,t.value2=o,t}));t.value=v})).catch((e=>{console.error("请求失败:",e),u.Ay.error("请求失败，请重试！")}))};function C(e,n){let t="";const r=Math.max(e.length,n.length);for(let o=0;o<r;o++){const r=e[o]||"",l=n[o]||"";r===l?t+=r:l&&(t+=`<span style="color: red;">${l}</span>`)}return t}function x(e,n){let t="";const r=Math.max(e.length,n.length);for(let o=0;o<r;o++){const r=e[o]||"",l=n[o]||"";r===l?t+=r:l&&(t+=`<span style="color: red;">${l}</span>`)}return t}function A(e,n){let t="",r="";const o=Math.max(e.length,n.length);for(let l=0;l<o;l++){const o=e[l]||"",a=n[l]||"";o===a?(t+=o,r+=a):(t+=`<span style="color: red;">${o}</span>`,r+=`<span style="color: red;">${a}</span>`)}return{result1:t,result2:r}}const w=()=>{localStorage.clear()},T=e=>{const n="text/plain"===e.type;return n||u.Ay.error("只支持上传 .txt 文件!"),n},M=async({file:e,onSuccess:n})=>{setTimeout((()=>{n(e),j(e)}),1e3)},O=e=>{const t=e.file.status;n.value=e.fileList,"done"===t?u.Ay.success(`${e.file.name} 上传成功.`):"error"===t&&u.Ay.error(`${e.file.name} 上传失败`)},j=e=>{console.log("收到了文件",e);const n=new FileReader;n.onload=n=>{const t=n.target.result;localStorage.setItem(`file_${e.name}`,t),console.log(`文件内容已保存: ${e.name}`),console.log("当前文件列表:");for(let e=0;e<localStorage.length;e++){const n=localStorage.key(e);console.log(n)}},n.readAsText(e)};function K(e){console.log(e)}return(0,o.sV)((()=>{w()})),(e,r)=>{const a=(0,o.g2)("inbox-outlined"),u=(0,o.g2)("a-upload-dragger"),i=(0,o.g2)("a-button");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",c,[(0,o.Lk)("div",s,[(0,o.bF)(u,{fileList:n.value,"onUpdate:fileList":r[0]||(r[0]=e=>n.value=e),name:"file",multiple:!0,"before-upload":T,"custom-request":M,onChange:O,onDrop:K},{default:(0,o.k6)((()=>[(0,o.Lk)("p",f,[(0,o.bF)(a)]),r[1]||(r[1]=(0,o.Lk)("p",{class:"ant-upload-text"},"点击或拖拽 .txt 文件到此区域进行上传",-1)),r[2]||(r[2]=(0,o.Lk)("p",{class:"ant-upload-hint"}," 支持单个或多个文件上传。严格禁止上传公司数据或其他禁止文件。 ",-1))])),_:1},8,["fileList"])]),(0,o.Lk)("div",d,[(0,o.bF)(i,{class:"centered-button",type:"primary",onClick:E},{default:(0,o.k6)((()=>r[3]||(r[3]=[(0,o.eW)(" 确定 ")]))),_:1})])]),(0,o.Lk)("table",null,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[r[4]||(r[4]=(0,o.Lk)("th",null,null,-1)),(0,o.Lk)("th",null,(0,l.v_)(e.fileName1),1),(0,o.Lk)("th",null,(0,l.v_)(e.fileName2),1)])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.value,(e=>((0,o.uX)(),(0,o.CE)("tr",{key:e.key},[(0,o.Lk)("td",null,(0,l.v_)(e.key),1),(0,o.Lk)("td",{innerHTML:e.value1},null,8,p),(0,o.Lk)("td",{innerHTML:e.value2},null,8,v)])))),128))])]),(0,o.Lk)("div",m,[(0,o.Lk)("div",null,[r[5]||(r[5]=(0,o.Lk)("h3",null,"区域1（Key）:",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(g.value,((e,n)=>((0,o.uX)(),(0,o.CE)("p",{key:n},(0,l.v_)(n),1)))),128)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(k.value,((e,n)=>((0,o.uX)(),(0,o.CE)("p",{key:n,innerHTML:L.value[n]},null,8,y)))),128))]),(0,o.Lk)("div",null,[r[6]||(r[6]=(0,o.Lk)("h3",null,"区域2（Value）:",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(g.value,((e,n)=>((0,o.uX)(),(0,o.CE)("p",{key:n},(0,l.v_)(e),1)))),128)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(k.value,((e,n)=>((0,o.uX)(),(0,o.CE)("p",{key:n,innerHTML:b.value[n]},null,8,h)))),128))])])],64)}}};const k=g;var b=k,L=t(1387);const E={class:"home"};function C(e,n,t,r,l,a){return(0,o.uX)(),(0,o.CE)("div",E)}var x={name:"HomeView"},A=t(1241);const w=(0,A.A)(x,[["render",C]]);var T=w;const M=[{path:"/",name:"home",component:T},{path:"/about",name:"about",component:()=>t.e(594).then(t.bind(t,603))}],O=(0,L.aE)({history:(0,L.Bt)(),routes:M});var j=O,K=t(475);(0,r.Ef)(b).use(j).use(K.Ay).mount("#app")}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var l=n[r]={exports:{}};return e[r].call(l.exports,l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(n,r,o,l){if(!r){var a=1/0;for(s=0;s<e.length;s++){r=e[s][0],o=e[s][1],l=e[s][2];for(var u=!0,i=0;i<r.length;i++)(!1&l||a>=l)&&Object.keys(t.O).every((function(e){return t.O[e](r[i])}))?r.splice(i--,1):(u=!1,l<a&&(a=l));if(u){e.splice(s--,1);var c=o();void 0!==c&&(n=c)}}return n}l=l||0;for(var s=e.length;s>0&&e[s-1][2]>l;s--)e[s]=e[s-1];e[s]=[r,o,l]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(n,r){return t.f[r](e,n),n}),[]))}}(),function(){t.u=function(e){return"js/about.2145b6e3.js"}}(),function(){t.miniCssF=function(e){}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={},n="redalert:";t.l=function(r,o,l,a){if(e[r])e[r].push(o);else{var u,i;if(void 0!==l)for(var c=document.getElementsByTagName("script"),s=0;s<c.length;s++){var f=c[s];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==n+l){u=f;break}}u||(i=!0,u=document.createElement("script"),u.charset="utf-8",u.timeout=120,t.nc&&u.setAttribute("nonce",t.nc),u.setAttribute("data-webpack",n+l),u.src=r),e[r]=[o];var d=function(n,t){u.onerror=u.onload=null,clearTimeout(p);var o=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),o&&o.forEach((function(e){return e(t)})),n)return n(t)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=d.bind(null,u.onerror),u.onload=d.bind(null,u.onload),i&&document.head.appendChild(u)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var e={524:0};t.f.j=function(n,r){var o=t.o(e,n)?e[n]:void 0;if(0!==o)if(o)r.push(o[2]);else{var l=new Promise((function(t,r){o=e[n]=[t,r]}));r.push(o[2]=l);var a=t.p+t.u(n),u=new Error,i=function(r){if(t.o(e,n)&&(o=e[n],0!==o&&(e[n]=void 0),o)){var l=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;u.message="Loading chunk "+n+" failed.\n("+l+": "+a+")",u.name="ChunkLoadError",u.type=l,u.request=a,o[1](u)}};t.l(a,i,"chunk-"+n,n)}},t.O.j=function(n){return 0===e[n]};var n=function(n,r){var o,l,a=r[0],u=r[1],i=r[2],c=0;if(a.some((function(n){return 0!==e[n]}))){for(o in u)t.o(u,o)&&(t.m[o]=u[o]);if(i)var s=i(t)}for(n&&n(r);c<a.length;c++)l=a[c],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(s)},r=self["webpackChunkredalert"]=self["webpackChunkredalert"]||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))}();var r=t.O(void 0,[504],(function(){return t(5781)}));r=t.O(r)})();
//# sourceMappingURL=app.46b74a79.js.map